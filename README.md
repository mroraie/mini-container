در ادامه، نسخه ساده‌شده و متنی (Markdown) مستندات پروژه شما را آماده کرده‌ام. این نسخه برای نمایش در فایل `README.md` گیت‌هاب بسیار مناسب است و تمام بخش‌های فنی و آموزشی شما را با ساختاری مرتب حفظ کرده است.

---

# مینی کانتینر (Mini Container)

این پروژه یک پیاده‌سازی سبک‌وزن از کانتینرها با استفاده از قابلیت‌های هسته لینوکس است. هدف این پروژه آموزش مفاهیم عمیق سیستم‌عامل مانند ایزولاسیون فرایند و مدیریت منابع است.

## ویژگی‌های کلیدی

* **ایزولاسیون فرایند**: استفاده از Linux Namespaces (PID, Mount, UTS, Network, User).
* **مدیریت منابع**: کنترل میزان مصرف CPU و RAM از طریق Cgroups.
* **امنیت فایل‌سیستم**: استفاده از `chroot` برای محدودسازی دسترسی به دایرکتوری ریشه.
* **مدیریت چرخه حیات**: قابلیت ایجاد، شروع، توقف و حذف کانتینر.
* **رابط کاربری دوگانه**: دارای خط فرمان (CLI) و رابط گرافیکی ترمینالی (TUI).

## پیش‌نیازها

* **هسته لینوکس**: نسخه ۳.۸ یا بالاتر.
* **کامپایلر**: GCC (g++) با پشتیبانی از C++11.
* **دسترسی**: اجرای دستورات با سطح دسترسی `root` یا `sudo`.
* **Cgroups**: باید در مسیر `/sys/fs/cgroup` مونت شده باشد.

## نصب و راه‌اندازی

### ۱. کامپایل پروژه

```bash
git clone https://github.com/mroraie/mini-container.git
cd mini-container
make
make ui

```

### ۲. استقرار سریع

```bash
./deploy.sh
./deploy-dev.sh

```

## نحوه استفاده

### رابط گرافیکی ترمینال

برای تجربه بصری مدیریت کانتینرها:

```bash
./mini-container-ui

```

### دستورات خط فرمان (CLI)

* **اجرای یک دستور در کانتینر:**
`./mini-container run /bin/echo "Hello World"`
* **اجرا با محدودیت منابع:**
`./mini-container run --memory 128 --cpu 512 /bin/sh`
* **مشاهده وضعیت:**
`./mini-container list`
`./mini-container info <container_id>`
* **توقف و حذف:**
`./mini-container stop <container_id>`
`./mini-container destroy <container_id>`

---

## مفاهیم سیستم‌عامل به کار رفته

### ۱. Linux Namespaces

این تکنولوژی باعث می‌شود فرایند داخل کانتینر فکر کند سیستم متعلق به اوست:

* **PID**: فرایندها فقط خودشان را می‌بینند.
* **Mount**: فایل‌سیستم ایزوله.
* **UTS**: نام میزبان (Hostname) جداگانه.
* **Network**: کارت شبکه مجازی مستقل.

### ۲. Control Groups (Cgroups)

برای جلوگیری از مصرف تمام منابع سیستم توسط یک کانتینر:

* **CPU**: تعیین سهمیه پردازش.
* **Memory**: تعیین سقف مصرف رم و Swap.

### ۳. فراخوانی‌های سیستمی (System Calls)

در قلب این پروژه از توابع زیر استفاده شده است:

* `clone()`: برای ایجاد فرایند جدید با فضاهای نام مشخص.
* `unshare()`: برای جدا کردن بخش‌های مشترک فرایند.
* `mount()` و `chroot()`: برای ایزولاسیون دایرکتوری‌ها.

---

## مقایسه مینی کانتینر با داکر (Docker)

| ویژگی | مینی کانتینر | Docker |
| --- | --- | --- |
| **ایزولاسیون** | فضای نام هسته (Namespace) | فضای نام + لایه‌های امنیتی اضافی |
| **مدیریت منابع** | cgroups ساده | cgroups پیشرفته + سهمیه‌بندی دقیق |
| **فایل‌سیستم** | chroot ساده | سیستم لایه‌ای (OverlayFS) |
| **شبکه** | فضای نام پایه | پل‌های مجازی (Bridge) و شبکه پیچیده |
| **پیچیدگی** | بسیار کم (آموزشی) | بالا (صنعتی) |

---

## تست‌های عملکرد

برای اطمینان از ایزولاسیون، می‌توانید تست‌های زیر را داخل کانتینر اجرا کنید:

* **تست فشار CPU:**
`while true; do :; done`
* **تست محدودیت حافظه:**
`dd if=/dev/zero of=/tmp/mem bs=1M count=80`

آیا مایل هستید در مورد نحوه پیاده‌سازی بخش خاصی از کد (مثلاً نحوه فراخوانی `clone`) توضیحات بیشتری بدهم؟
